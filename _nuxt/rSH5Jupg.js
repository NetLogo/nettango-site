import{d as x,r as m,c as S,w as R,L as Q,W as _,aO as k,aP as B,e as I,f as d,aQ as P,o as F,z as s,l as U,J as Y}from"#entry";import E from"./BxLsNz4E.js";import H from"./DEGHkdmv.js";import V from"./CUCyyG0J.js";import A from"./7wDEbss4.js";import N from"./9gZOq2g8.js";import O from"./CuqO8q6j.js";import j from"./D3P_oA0p.js";import{s as z}from"./CgiAIXOa.js";import"./CReZLxaF.js";import"./DLmdqyzl.js";import"./CHH4w_mX.js";import"./DUGfJQtE.js";const D=x({__name:"SideCatalog",props:{isLoading:{type:Boolean,default:!1},isSelected:{type:Function,default:()=>!1},itemPrefix:{default:"item: "},items:{},label:{},onSelect:{type:Function,default:void 0},query:{type:Function,default:void 0},scrollMarginTop:{default:0},selectedItemLabel:{default:""},withRouteTransition:{type:Boolean,default:!1}},emits:["select"],setup(a,{emit:T}){const o=a,q=T,n=k(),c=B(),l=m(),f=m(),i=m(""),L=S(()=>i.value.length>0),C=S(()=>!L.value||!o.query?o.items:o.query(i.value));function b(e,t){if(o.onSelect?.(e,t),q("select",e,t),o.withRouteTransition&&t instanceof MouseEvent){t.preventDefault();const r=t.currentTarget.getAttribute("href");if(r===null)return;const u=new URL(r,window.location.href);u.searchParams.set("query",i.value),u.searchParams.set("parentScrollY",String(l.value?.$el?.scrollTop??0));const w=c.options.history.base,$=u.pathname.replace(w,"/").replace("//","/");c.push($+u.search+u.hash)}}function p(e){i.value=e,h()}const M=P(),y=m(!1),v=()=>{if(y.value||o.isLoading||!(l.value||f.value))return;const e=n.query.parentScrollY;e!==void 0&&e!=="0"&&l.value?.$el&&(l.value.$el.scrollTop=Number(e)),h();const t={...n.query};delete t.parentScrollY,c.replace({query:t}),y.value=!0},h=()=>{const e=o.scrollMarginTop;setTimeout(()=>{if(!(l.value?.$el&&f.value?.$el))return;const t=l.value.$el,g=f.value.$el,r=document.querySelector(`a.${M.active}`);r?(t.scrollTo({behavior:"smooth",top:r.offsetTop-e}),g.scrollTo({behavior:"instant",top:r.offsetTop-e})):t.scrollTo({top:0})},0)};return R(()=>[o.isLoading],()=>{if(o.isLoading)return;const e=n.query.query;e&&p(e),v()}),Q(()=>{v()}),_(()=>{const e=n.query.query;e&&p(e);const t={...n.query};delete t.query,c.replace({query:t})}),(e,t)=>(F(),I(j,null,{default:d(()=>[s(E,{ref_key:"contentRef",ref:l},{default:d(()=>[s(A,{"selected-item-label":a.selectedItemLabel,"item-prefix":a.itemPrefix},null,8,["selected-item-label","item-prefix"]),s(O,{ref_key:"itemsList",ref:f},{default:d(()=>[s(H,{title:a.label},{default:d(()=>[s(N,{placeholder:"Search...","model-value":i.value,"onUpdate:modelValue":p},null,8,["model-value"])]),_:1},8,["title"]),s(V,{items:C.value,"on-select":b,"is-selected":a.isSelected,"is-loading":a.isLoading},null,8,["items","is-selected","is-loading"])]),_:1},512)]),_:1},512),U(e.$slots,"default")]),_:3}))}}),J={$style:z},ie=Object.assign(Y(D,[["__cssModules",J]]),{__name:"SideCatalog"});export{ie as default};
